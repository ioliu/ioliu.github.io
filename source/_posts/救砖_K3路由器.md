---
title: 走运的一次K3救假砖过程
date: 2018-08-01 18:36:53
tags: 
- linux
- 折(作)腾(死)日记
- 服务器相关
categories: 折(作)腾(死)日记
---
最近在给K3刷机的过程中不小心刷坏了，本先按照教程降级、刷官改，可能是因为没有恢复出厂设置的原因，经常用着用着假死，于是又刷了root版官方固件，再刷LEDE，结果2.4G的无线出问题了，没有信号，于是又刷回root版(因为回到官改版需要一个过渡固件)，这一步之后就出问题了，开机后进度条卡住，系统和CFE都进不去
<!--more-->
闲置了半天之后发现还没关机，进度条还在那卡着，就连续按了两下开关，奇迹突然出现，电脑突然获取到了IP，打开网关页登录上，但是wan口不工作，所以root版的工具箱没法使用，没法一键直刷
鉴于之前启动了无数次，捅了无数次菊花，然鹅CFE也没能进去，怀疑是带引导功能的分区坏了，就没敢上传固件，telnet默认也是关闭的，但SSH是开着的
尝试了一下SSH，里面 `cat` 命令竟然能用，记得之前教程中有提醒备份`mtdblock`分区，命令是
```
cd /tmp/share/sda1/backup
cat /dev/mtdblock0 > mtdblock0.bin
cat /dev/mtdblock1 > mtdblock1.bin
cat /dev/mtdblock2 > mtdblock2.bin
cat /dev/mtdblock3 > mtdblock3.bin
cat /dev/mtdblock4 > mtdblock4.bin
cat /dev/mtdblock5 > mtdblock5.bin
cat /dev/mtdblock6 > mtdblock6.bin
cat /dev/mtdblock7 > mtdblock7.bin
cat /dev/mtdblock8 > mtdblock8.bin
```
那么相反的情况，要恢复肯定是 `cd /tmp/share/sda1/backup && cat mtdblock0.bin > /dev/mtdblock0 && reboot` ，这样一路运行下来没有提示错误，于是断电重启；K3的系统中并没有reboot命令，之所以在最后加个reboot是为了判断cat命令是否执行完
重启后当然如我所愿，又恢复正常了，恢复出厂设置，还是官改版养老吧，毕竟这路由器太天价了，折腾不起
